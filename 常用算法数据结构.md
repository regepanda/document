## Hash一致性算法
### 求余法计算数据hash值
```
(1).这种方法虽然可以把用户的请求映射到不同的服务器,但是不能满足新
增或者删除节点的情况
(2).每次新增或者删除节点都会导致原来映射到那个节点的数据全部失效，
长期的类似操作将会导致越来越多的数据失效。
(3).下面来解释(2)的原因。根据hash(object)%(N)映射公式，客户端此时
请求的数据在查找对应存放的机器的时候肯定会找不着
```
### hash一致性算法
#### 一些概念思想
(1).单调性,单调性是指如果已经有一些数据通过哈希分派到了相应的机器节点中，又有新的节点加入到系统中。
哈希的结果应能够保证原有已分配的内容可以被映射到新的节点或原有的节点中去，而不是总被映射到旧的缓冲集合中的其他缓冲区。
(2).平衡性，平衡性尽可能让数据均匀的映射到各个节点中
#### 实际应用
```
(1).我们可以把我们的系统想成一个环，先通过hash算法计算每个节点机器的hash值
将其映射到圆环上，然后再通过相同的hash算法算出数据的hash值均匀的分布到环上
以key的位置顺时针找到的第一个节点，就将数据映射到这个节点上
(2).增加一个节点，只需要以节点逆时针找与下一个节点之间的数据映射到新增的这个节点上
(3).删除节点，只需要把原来映射到这台节点上的数据重新按照顺时针映射到下一个节点
(4).这样由于节点主机的频繁增减只会影响部分数据的修改
```
#### 问题
```
(1).hash 算法并不是保证绝对的平衡，如果 cache 较少的话，对象并不能被均匀的映射到 cache 上
解决办法是引入虚拟节点，保证数据能够均匀的分布到各个节点中，最大限度的利用
缓存空间，实现负载均衡，保证了平衡性。
```